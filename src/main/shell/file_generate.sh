#!/bin/bash
#############################################################
#名称   生成flow和配置文件
#############################################################

source /d/projects/ymxjob/src/main/common/functions.sh

#获取脚本参数
opts=$@

#解析脚本参数
start_date=`getparam start_date "$opts"`
end_date=`getparam end_date "$opts"`

base_dir=/d/projects/ymxjob/src/main/flow/
#样例
company_sample=A20090247

companys="A20040002 A20030001 A20060010 A20060019 A20060020 A20060021 A20060022 A20060024 A20060009 A20060011 A20060012 A20050008 A20040003 A20040004 A20050005 A20050006 A20060015 A20060016 A20060017 A20060018 A20060026 A20060027 A20070035 A20070036 A20070037 A20070038 A20050007 A20060013 A20060014 A20060023 A20060025 A20060028 A20060029 A20070030 A20070031 A20070032 A20070033 A20070034 A20070039 A20070040 A20070041 A20070042 A20070043 A20070044 A20070045 A20070046 A20070047 A20070048 A20080049 A20080050 A20080051 A20080052 A20080053 A20080054 A20080055 A20080056 A20080057 A20080058 A20080059 A20080060 A20080061 A20080062 A20080064 A20080065 A20080066 A20080067 A20080068 A20080069 A20080070 A20080071 A20080072 A20080073 A20080074 A20080075 A20080076 A20080077 A20080078 A20080079 A20080080 A20080081 A20080082 A20080083 A20080084 A20080085 A20080086 A20080087 A20080088 A20080089 A20080091 A20080092 A20080093 A20080094 A20080095 A20080096 A20080097 A20080098 A20080099 A20080100 A20080101 A20080102 A20080103 A20080104 A20080105 A20080106 A20080107 A20080108 A20080109 A20080110 A20080111 A20080112 A20080113 A20080114 A20080115 A20080116 A20080117 A20080118 A20080119 A20080120 A20080121 A20080122 A20080123 A20080124 A20080125 A20080126 A20080127 A20080128 A20080129 A20080130 A20080131 A20080132 A20080133 A20080134 A20080135 A20080136 A20080137 A20080138 A20080139 A20080140 A20080141 A20080142 A20080143 A20080090 A20080144 A20080145 A20080146 A20080152 A20080153 A20080155 A20080156 A20080157 A20080158 A20080159 A20080160 A20080161 A20080162 A20080163 A20080164 A20080165 A20080166 A20080167 A20080168 A20080169 A20080170 A20080171 A20080172 A20080173 A20080174 A20080175 A20080176 A20080177 A20080178 A20080179 A20080180 A20080181 A20080182 A20080183 A20080184 A20080185 A20080186 A20080187 A20080188 A20080189 A20080190 A20080191 A20080192 A20080193 A20080194 A20080195 A20080196 A20090197 A20090198 A20090199 A20090200 A20090201 A20090202 A20090203 A20090204 A20090205 A20090206 A20090207"

echo "循环开始时间:"`date "+%Y-%m-%d %H:%M:%S"`

for i in $companys
do
    echo "------公司:$i"
    directory=${base_dir}/${i}
    #创建目录
    mkdir ${directory}
    cd ${directory}
    cp ${base_dir}/${company_sample}/az.project ./az.project
    cp ${base_dir}/${company_sample}/A20090247_properties.sh ./${i}_properties.sh    
    cp ${base_dir}/${company_sample}/A20090247.flow ./${i}.flow
    #修改文件里面的配置
    sed -i "s/A20090247/${i}/g" ${i}.flow
    #打包
    zip ${i}.zip ${i}.flow az.project
done

echo "循环结束时间:"`date "+%Y-%m-%d %H:%M:%S"`

#如果执行失败就退出
if [ $? -ne 0 ];then
     echo "[ERROR] execute failed!"
     exit $?
fi
